# === –í –†–ê–ó–†–ê–ë–û–¢–ö–ï !!! ===
### === –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ VPS!!! ===

---

## –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–æ—Ç–∞–º–∏ - –°–£–ë–æ—Ç–∞&#169; üòä
### API - –ú–µ–Ω–µ–¥–∂–µ—Ä –±–æ—Ç–æ–≤ –°–£–ë–æ—Ç–∞¬©Ô∏è  (manageBots)
### (FastAPI+Aiogram3+Webhook+SSL –Ω–∞ VPS/VDS): 

<u>***!!! –û—Å—Ç–æ—Ä–æ–∂–Ω–æ, —Å–∫—Ä–∏–ø—Ç—ã –º–æ–≥—É—Ç –∑–∞—Ç–µ—Ä–µ—Ç—å –≤–∞—à–∏ —Ñ–∞–π–ª—ã!!!***</u>  
<u>***–ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ –≤–Ω–æ–≤—å —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä!***</u>  

---
### –û–ø–∏—Å–∞–Ω–∏–µ
–ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç –ø–æ —Ä–∞–∑–º–µ—â–µ–Ω–∏—é –°–£–ë–æ—Ç–∞–º–∏ –Ω–∞ Aiogram3 c webhook, SSL –Ω–∞ VPS/VDS.  
–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –Ω–∞ API FastAPI, –ë–î SQLite (–≤–æ–∑–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±—É—é –°–£–ë–î - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ SQLAlchemy)  
–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –Ω–∞ –û–° —Å–µ—Ä–≤–µ—Ä–æ–≤ .... Timeweb, –†–µ–≥.—Ä—É:  Ubuntu 20.04, Ubuntu 22.04.

1. –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É `ssh root@xxx.xxx.xxx.xxx` –∏ –≤—ã–ø–æ–ª–Ω—è–µ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã.    

2. –°–∫–∞—á–∏–≤–∞–µ–º –∏ –∑–∞–ø—É—Å–∫–∞–µ–º –ø–µ—Ä–≤—ã–π —Å–∫—Ä–∏–ø—Ç, –≤—ã–ø–æ–ª–Ω–∏–º –∫–æ–º–∞–Ω–¥—É:  
    ```
    wget -O ./0_prepare.sh https://raw.githubusercontent.com/Marat2010/manageBots/v2_1/Scripts/0_prepare.sh && chmod +x 0_prepare.sh && ./0_prepare.sh
    ```
   –°–∫—Ä–∏–ø—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –≤—Å–µ, –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –±–æ—Ç–æ–≤: 
   - —Å–∫–∞—á–∞–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
   - —É—Å—Ç–∞–Ω–æ–≤–∫—É –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫—É nginx
   - —É—Å—Ç–∞–Ω–æ–≤–∫—É –≤–∏—Ä—Ç.–æ–∫—Ä—É–∂–µ–Ω–∏—è, –ø–∞–∫–µ—Ç–æ–≤ apt, –ø–∞–∫–µ—Ç–æ–≤ –∏–∑ requirements.txt
   - –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Å–∫—Ä–∏–ø—Ç—ã.
   - ...

3. –í –∫–æ–Ω—Ü–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞ –±—É–¥—É—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã —Å—Å—ã–ª–∫–∏ –¥–ª—è –≤—Ö–æ–¥–∞ –≤ API (swagger).
4. –î–æ–±–∞–≤–ª—è–µ–º –±–æ—Ç–∞ –≤ —Ä–∞–∑–¥–µ–ª–µ "Manage Bots" -> "/api/bots/add_bot" -> "Try it out".  
   –í "Request body" —É–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–∫–µ–Ω, –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ–º –≤–º–µ—Å—Ç–æ "string":
   ```
   {
       "token_tg": "6xxxx:AAEdN...............tAQ"
   }
   ```
   –ß—É—Ç—å –Ω–∏–∂–µ –∂–º—ë–º –Ω–∞ "Execute", –≤ —Ä–∞–∑–¥–µ–ª–µ "Responses" —É–≤–∏–¥–∏–º –æ—Ç–≤–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ json.  
   –®–∞–±–ª–æ–Ω–Ω—ã–π –±–æ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è.
5. –í –ø—Ä–æ–µ–∫—Ç–µ "manageBots" –≤ –ø–∞–ø–∫–µ "our_Bots" —Å—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –ø–∞–ø–∫–∞ –≤–∏–¥–∞ "bot_<–Ω–æ–º–µ—Ä –ø–æ—Ä—Ç–∞>",
  –≥–¥–µ <–Ω–æ–º–µ—Ä –ø–æ—Ä—Ç–∞> - "web_server_port" –≤ –Ω–∞—à–µ–º –ø–æ–ª—É—á–µ–Ω–Ω–æ–º json –æ—Ç–≤–µ—Ç–µ.
6. –í –ø–∞–ø–∫–µ "bot_<–Ω–æ–º–µ—Ä –ø–æ—Ä—Ç–∞>" —Ö—Ä–∞–Ω–∏—Ç—Å—è —à–∞–±–ª–æ–Ω –¥–ª—è –±–æ—Ç–∞, –∫—É–¥–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å 
  –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å Polling-–∞ –Ω–∞ –≤–µ–±—Ö—É–∫.  
   –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–¥–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ç–æ–ª—å–∫–æ —É–±—Ä–∞—Ç—å Poling, –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –∑–∞–¥–∞—é—Ç—Å—è –≤ 
  —Ñ–∞–π–ª–µ "config_bots", –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (—Ñ–∞–π–ª ./DB/manbot.sqlite3).
7. –î–∞–ª–µ–µ, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ —á–µ—Ä–µ–∑ API (Swagger)  
  -> –†–∞–∑–¥–µ–ª "Manage Bots by web_server_port" 
  –∏–ª–∏ "Manage Bots by token_tg"  
  -> "/api/bots/update_active_by_port" –∏–ª–∏ "/api/bots/update_active_by_token"  
  -> —É–∫–∞–∑—ã–≤–∞–µ–º –ª–∏–±–æ –ø–æ—Ä—Ç –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –∫—Ä—É—Ç–∏—Ç—Å—è –±–æ—Ç(—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –±–æ—Ç–∞), –ª–∏–±–æ —Ç–æ–∫–µ–Ω –¢–ì.  
  -> –≤—ã—Å—Ç–∞–≤–ª—è–µ–º "active" —Å–Ω–∞—á–∞–ª–∞ –≤ "–ù–µ—Ç", –ø–æ—Ç–æ–º –≤ "–î–∞" –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞.
   
–ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –±–æ—Ç—ã (–ø–µ—Ä–µ–≤–æ–¥—è—Ç—Å—è —Å Polling-–∞).

–î–∞–ª—å–Ω–µ–π—à–∞—è —Ä–∞–±–æ—Ç–∞, –±—É–¥–µ—Ç –∑–∞–∫–ª—é—á–∞—Ç—å—Å—è –≤ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –±–æ—Ç–∞ (active) –≤ API, –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∏ —É–¥–∞–ª–µ–Ω–∏–∏ –±–æ—Ç–æ–≤.
–ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –±–æ—Ç–æ–≤, –≤ –ø–∞–ø–∫–µ "./our_Bots/Archive/" —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞—Ä—Ö–∏–≤ —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –±–æ—Ç–∞ —Ç–∞–∫–æ–≥–æ 
–≤–∏–¥–∞: <bot_9001_26-09-2024_02:56:55.tar.gz>.

### –î–æ–ø.–∏–Ω—Ñ–æ
–î–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å–≤–æ–µ–π —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–æ—Ç–∞–º–∏ –Ω–∞ "—Ñ—Ä–æ–Ω—Ç–µ" (web), –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å "curl", 
–∫–æ—Ç–æ—Ä—ã–π —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –≤ swagger –≤ –æ—Ç–≤–µ—Ç–µ "Responses"  

![](curl.png)

–î–∞–ª–µ–µ —á–µ—Ä–µ–∑ —Å–∞–π—Ç –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä: https://curlconverter.com/python/) –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –µ–≥–æ –≤ –∫–æ–¥ 
–Ω–∞ –ª—é–±–æ–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è.

<img src="convert.png"/>


---
 
### –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ –±—É–¥–µ—Ç ....
–ü–æ–∫–∞ –Ω–µ –¥–µ–ª–∞–ª —Å–≤—è–∑–∫—É "Owner" —Å –±–æ—Ç–∞–º–∏, —Å–∞–º–∞ —Ç–∞–±–ª–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∞.  
–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å—Å—è ManyToMany –∏–ª–∏ OneToMany ....
–ò–ª–∏ –≤–æ–æ–±—â–µ –Ω–µ –¥–µ–ª–∞—Ç—å, –≤–æ–∑–º–æ–∂–Ω–æ "Owner" –±—É–¥–µ—Ç —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ 
–∏–ª–∏ –ø—Ä–∏–≤—è–∑—ã–≤–∞—Ç—å—Å—è –≤ –¥—Ä—É–≥–æ–π —Å–∏—Å—Ç–µ–º–µ.
\
\
\
<br>
&nbsp;&nbsp;&nbsp;&nbsp;¬©Marat2010



